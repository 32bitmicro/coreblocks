<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>coreblocks.transactions package &mdash; Coreblocks documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="coreblocks.utils package" href="coreblocks.utils.html" />
    <link rel="prev" title="coreblocks.structs_common package" href="coreblocks.structs_common.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Coreblocks documentation
            <img src="_static/logo-banner.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assumptions.html">List of assumptions made during development</a></li>
<li class="toctree-l1"><a class="reference internal" href="Development_environment.html">Development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transactions.html">Documentation for Coreblocks transaction framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduler/Overview.html">Scheduler overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_structs/Implementation/RS_impl.html">Proposition of Reservation Station implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_structs/RS.html">Reservation Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="Problem-checklist.html">Problem checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis/Synthesis.html">Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Coreblocks documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="api.html">API</a> &raquo;</li>
          <li><a href="coreblocks.html">coreblocks package</a> &raquo;</li>
      <li>coreblocks.transactions package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/coreblocks.transactions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="coreblocks-transactions-package">
<h1>coreblocks.transactions package<a class="headerlink" href="#coreblocks-transactions-package" title="Permalink to this heading"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</div>
<div class="section" id="module-coreblocks.transactions.core">
<span id="coreblocks-transactions-core-module"></span><h2>coreblocks.transactions.core module<a class="headerlink" href="#module-coreblocks.transactions.core" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.ConflictPriority">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">ConflictPriority</span></span><a class="headerlink" href="#coreblocks.transactions.core.ConflictPriority" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.ConflictPriority.LEFT">
<span class="sig-name descname"><span class="pre">LEFT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#coreblocks.transactions.core.ConflictPriority.LEFT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.ConflictPriority.RIGHT">
<span class="sig-name descname"><span class="pre">RIGHT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#coreblocks.transactions.core.ConflictPriority.RIGHT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.ConflictPriority.UNDEFINED">
<span class="sig-name descname"><span class="pre">UNDEFINED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#coreblocks.transactions.core.ConflictPriority.UNDEFINED" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">Method</span></span><a class="headerlink" href="#coreblocks.transactions.core.Method" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transactional method.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Method</span></code> serves to interface a module with external <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s. It can be called by at most once in a given clock cycle.
When a given <code class="docutils literal notranslate"><span class="pre">Method</span></code> is required by multiple <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
(either directly, or indirectly via another <code class="docutils literal notranslate"><span class="pre">Method</span></code>) simultenaously,
at most one of them is granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>, and the rest
of them must wait. (Non-exclusive methods are an exception to this
behavior.) Calling a <code class="docutils literal notranslate"><span class="pre">Method</span></code> always takes a single clock cycle.</p>
<p>Data is combinatorially transferred between to and from <code class="docutils literal notranslate"><span class="pre">Method</span></code>s
using Amaranth <code class="docutils literal notranslate"><span class="pre">Record</span></code>s. The transfer can take place in both directions
at the same time: from the called <code class="docutils literal notranslate"><span class="pre">Method</span></code> to the caller (<code class="docutils literal notranslate"><span class="pre">data_out</span></code>)
and from the caller to the called <code class="docutils literal notranslate"><span class="pre">Method</span></code> (<code class="docutils literal notranslate"><span class="pre">data_in</span></code>).</p>
<p>A module which defines a <code class="docutils literal notranslate"><span class="pre">Method</span></code> should use <code class="docutils literal notranslate"><span class="pre">body</span></code> or <code class="docutils literal notranslate"><span class="pre">def_method</span></code>
to describe the method’s effect on the module state.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
<dt><strong>ready: Signal, in</strong></dt><dd><p>Signals that the method is ready to run in the current cycle.
Typically defined by calling <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
</dd>
<dt><strong>run: Signal, out</strong></dt><dd><p>Signals that the method is called in the current cycle by some
<code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. Defined by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>.</p>
</dd>
<dt><strong>data_in: Record, out</strong></dt><dd><p>Contains the data passed to the <code class="docutils literal notranslate"><span class="pre">Method</span></code> by the caller
(a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>).</p>
</dd>
<dt><strong>data_out: Record, in</strong></dt><dd><p>Contains the data passed from the <code class="docutils literal notranslate"><span class="pre">Method</span></code> to the caller
(a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>). Typically defined by
calling <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonexclusive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.Method.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str or None</strong></dt><dd><p>Name hint for this <code class="docutils literal notranslate"><span class="pre">Method</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default) the name is
inferred from the variable name this <code class="docutils literal notranslate"><span class="pre">Method</span></code> is assigned to.</p>
</dd>
<dt><strong>i: int or record layout</strong></dt><dd><p>The format of <code class="docutils literal notranslate"><span class="pre">data_in</span></code>.
An <code class="docutils literal notranslate"><span class="pre">int</span></code> corresponds to a <code class="docutils literal notranslate"><span class="pre">Record</span></code> with a single <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd>
<dt><strong>o: int or record layout</strong></dt><dd><p>The format of <code class="docutils literal notranslate"><span class="pre">data_in</span></code>.
An <code class="docutils literal notranslate"><span class="pre">int</span></code> corresponds to a <code class="docutils literal notranslate"><span class="pre">Record</span></code> with a single <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd>
<dt><strong>nonexclusive: bool</strong></dt><dd><p>If true, the method is non-exclusive: it can be called by multiple
transactions in the same clock cycle. If such a situation happens,
the method still is executed only once, and each of the callers
receive its output. Nonexclusive methods cannot have inputs.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.add_conflict">
<span class="sig-name descname"><span class="pre">add_conflict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">ConflictPriority</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ConflictPriority.UNDEFINED</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Method.add_conflict" title="Permalink to this definition"></a></dt>
<dd><p>Registers a conflict.</p>
<p>Record that that the given <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code> cannot execute
simultaneously with this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.  Typical reason is using a common
resource (register write or memory port).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>end: Transaction or Method</strong></dt><dd><p>The conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code></p>
</dd>
<dt><strong>priority: ConflictPriority, optional</strong></dt><dd><p>Is one of conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s prioritized?
Defaults to undefined priority relation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.body">
<span class="sig-name descname"><span class="pre">body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ready:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">0'd0)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Record</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Method.body" title="Permalink to this definition"></a></dt>
<dd><p>Define method body</p>
<p>The <code class="docutils literal notranslate"><span class="pre">body</span></code> function should be used to define body of
a method. It uses the <code class="docutils literal notranslate"><span class="pre">ready</span></code> and <code class="docutils literal notranslate"><span class="pre">ret</span></code> signals provided by
the user to feed internal transactions logic and to pass this data
to method users. Inside the body, other <code class="docutils literal notranslate"><span class="pre">Method</span></code> s can be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m</strong><span class="classifier">Module</span></dt><dd><p>Module in which operations on signals should be executed,
<code class="docutils literal notranslate"><span class="pre">body</span></code> uses the combinational domain only.</p>
</dd>
<dt><strong>ready</strong><span class="classifier">Signal, in</span></dt><dd><p>Signal to indicate if the method is ready to be run. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so the method is always ready.
Assigned combinatorially to the <code class="docutils literal notranslate"><span class="pre">ready</span></code> attribute.</p>
</dd>
<dt><strong>out</strong><span class="classifier">Record, in</span></dt><dd><p>Data generated by the <code class="docutils literal notranslate"><span class="pre">Method</span></code>, which will be passed to
the caller (a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>). Assigned
combinatorially to the <code class="docutils literal notranslate"><span class="pre">data_out</span></code> attribute.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>data_in</strong><span class="classifier">Record, out</span></dt><dd><p>Data passed from the caller (a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another
<code class="docutils literal notranslate"><span class="pre">Method</span></code>) to this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="n">my_sum_method</span> <span class="o">=</span> <span class="n">Method</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">([(</span><span class="s2">&quot;arg1&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="s2">&quot;arg2&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">)]))</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="k">with</span> <span class="n">my_sum_method</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">out</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_in</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">comb</span> <span class="o">+=</span> <span class="nb">sum</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">data_in</span><span class="o">.</span><span class="n">arg1</span> <span class="o">+</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.current">
<span class="sig-name descname"><span class="pre">current</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#coreblocks.transactions.core.Method.current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.debug_signals">
<span class="sig-name descname"><span class="pre">debug_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Method.debug_signals" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.like">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">like</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.core.Method.like" title="Permalink to this definition"></a></dt>
<dd><p>Constructs a new <code class="docutils literal notranslate"><span class="pre">Method</span></code> based on another.</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">Method</span></code> has the same input/output data layouts as the
<code class="docutils literal notranslate"><span class="pre">other</span></code> <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong><span class="classifier">Method</span></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">Method</span></code> which serves as a blueprint for the new <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the new <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Method</dt><dd><p>The freshly constructed <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Method.use_method">
<span class="sig-name descname"><span class="pre">use_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.Method.use_method" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transaction.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> represents a task which needs to be regularly done.
Execution of a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> always lasts a single clock cycle.
A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> signals readiness for execution by setting the
<code class="docutils literal notranslate"><span class="pre">request</span></code> signal. If the conditions for its execution are met, it
can be granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> can, as part of its execution, call a number of
<code class="docutils literal notranslate"><span class="pre">Method</span></code>s. A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> can be granted only if every <code class="docutils literal notranslate"><span class="pre">Method</span></code>
it runs is ready.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> cannot execute concurrently with another, conflicting
<code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. Conflicts between <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s are either explicit
or implicit. An explicit conflict is added using the <code class="docutils literal notranslate"><span class="pre">add_conflict</span></code>
method. Implicit conflicts arise between pairs of <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
which use the same <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
<p>A module which defines a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> should use <code class="docutils literal notranslate"><span class="pre">body</span></code> to
describe used methods and the transaction’s effect on the module state.
The used methods should be called inside the <code class="docutils literal notranslate"><span class="pre">body</span></code>’s
<code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.</p>
</dd>
<dt><strong>request: Signal, in</strong></dt><dd><p>Signals that the transaction wants to run. If omitted, the transaction
is always ready. Defined in the constructor.</p>
</dd>
<dt><strong>grant: Signal, out</strong></dt><dd><p>Signals that the transaction is granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>,
and all used methods are called.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str or None</strong></dt><dd><p>Name hint for this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default) the name is
inferred from the variable name this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> is assigned to.
If the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> was not assigned, the name is inferred from
the class name where the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> was constructed.</p>
</dd>
<dt><strong>manager: TransactionManager</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> controlling this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.
If omitted, the manager is received from <code class="docutils literal notranslate"><span class="pre">TransactionContext</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.add_conflict">
<span class="sig-name descname"><span class="pre">add_conflict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">ConflictPriority</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ConflictPriority.UNDEFINED</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.add_conflict" title="Permalink to this definition"></a></dt>
<dd><p>Registers a conflict.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> is informed that given <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>
or <code class="docutils literal notranslate"><span class="pre">Method</span></code> cannot execute simultaneously with this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.
Typical reason is using a common resource (register write
or memory port).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>end: Transaction or Method</strong></dt><dd><p>The conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code></p>
</dd>
<dt><strong>priority: ConflictPriority, optional</strong></dt><dd><p>Is one of conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s prioritized?
Defaults to undefined priority relation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.body">
<span class="sig-name descname"><span class="pre">body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.body" title="Permalink to this definition"></a></dt>
<dd><p>Defines the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> body.</p>
<p>This context manager allows to conveniently define the actions
performed by a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> when it’s granted. Each assignment
added to a domain under <code class="docutils literal notranslate"><span class="pre">body</span></code> is guarded by the <code class="docutils literal notranslate"><span class="pre">grant</span></code> signal.
<code class="docutils literal notranslate"><span class="pre">Method</span></code> calls can be performed under <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m: Module</strong></dt><dd><p>The module where the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> is defined.</p>
</dd>
<dt><strong>request: Signal</strong></dt><dd><p>Indicates that the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> wants to be executed. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so it wants to be executed in
every clock cycle.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.context">
<span class="sig-name descname"><span class="pre">context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.context" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.current">
<span class="sig-name descname"><span class="pre">current</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#coreblocks.transactions.core.Transaction.current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.debug_signals">
<span class="sig-name descname"><span class="pre">debug_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.debug_signals" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.get">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.get" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.Transaction.use_method">
<span class="sig-name descname"><span class="pre">use_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.Transaction.use_method" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">TransactionContext</span></span><a class="headerlink" href="#coreblocks.transactions.core.TransactionContext" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionContext.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.TransactionContext.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionContext.get">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.core.TransactionContext.get" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionContext.stack">
<span class="sig-name descname"><span class="pre">stack</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">coreblocks.transactions.core.TransactionManager</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#coreblocks.transactions.core.TransactionContext.stack" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">TransactionManager</span></span><a class="headerlink" href="#coreblocks.transactions.core.TransactionManager" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Transaction manager</p>
<p>This module is responsible for granting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s and running
<code class="docutils literal notranslate"><span class="pre">Method</span></code>s. It takes care that two conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
are never granted in the same clock cycle.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cc_scheduler:</span> <span class="pre">~typing.Callable[[~coreblocks.transactions.core.TransactionManager,</span> <span class="pre">~amaranth.hdl.dsl.Module,</span> <span class="pre">dict['Transaction',</span> <span class="pre">set['Transaction']],</span> <span class="pre">set['Transaction'],</span> <span class="pre">dict['Transaction',</span> <span class="pre">int]],</span> <span class="pre">None]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">eager_deterministic_cc_scheduler&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.TransactionManager.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionManager.add_transaction">
<span class="sig-name descname"><span class="pre">add_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.TransactionManager.add_transaction" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionManager.visual_graph">
<span class="sig-name descname"><span class="pre">visual_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.TransactionManager.visual_graph" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionModule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">TransactionModule</span></span><a class="headerlink" href="#coreblocks.transactions.core.TransactionModule" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TransactionModule</span></code> is used as wrapper on <code class="docutils literal notranslate"><span class="pre">Module</span></code> class,
which add support for transaction to the <code class="docutils literal notranslate"><span class="pre">Module</span></code>. It creates a
<code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> which will handle transaction scheduling
and can be used in definition of <code class="docutils literal notranslate"><span class="pre">Method</span></code>s and <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionModule.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.TransactionModule.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>module: Module</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">Module</span></code> which should be wrapped to add support for
transactions and methods.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.core.TransactionModule.transaction_context">
<span class="sig-name descname"><span class="pre">transaction_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.TransactionContext" title="coreblocks.transactions.core.TransactionContext"><span class="pre">TransactionContext</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.core.TransactionModule.transaction_context" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coreblocks.transactions.core.def_method">
<span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">def_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method:</span> <span class="pre">~coreblocks.transactions.core.Method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ready:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.def_method" title="Permalink to this definition"></a></dt>
<dd><p>Define a method.</p>
<p>This decorator allows to define transactional methods in more
elegant way using Python’s <code class="docutils literal notranslate"><span class="pre">def</span></code> syntax.</p>
<p>The decorated function should take one argument, which will be a
record with input signals and return output values.
The returned value can be either a record or a dictionary of outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m: Module</strong></dt><dd><p>Module in which operations on signals should be executed.</p>
</dd>
<dt><strong>method: Method</strong></dt><dd><p>The method whose body is going to be defined.</p>
</dd>
<dt><strong>ready: Signal</strong></dt><dd><p>Signal to indicate if the method is ready to be run. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so the method is always ready.
Assigned combinatorially to the <code class="docutils literal notranslate"><span class="pre">ready</span></code> attribute.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="n">my_sum_method</span> <span class="o">=</span> <span class="n">Method</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;arg1&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="s2">&quot;arg2&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">)],</span> <span class="n">o</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="nd">@def_method</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">my_sum_method</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">data_in</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg1</span> <span class="o">+</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg2</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coreblocks.transactions.core.eager_deterministic_cc_scheduler">
<span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">eager_deterministic_cc_scheduler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">porder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.eager_deterministic_cc_scheduler" title="Permalink to this definition"></a></dt>
<dd><p>This function generates an eager scheduler for the transaction
subsystem. It isn’t fair, because it starts transactions using
transaction index in <cite>cc</cite> as a priority. Transaction with the lowest
index has the highest priority.</p>
<p>If there are two different transactions which have no conflicts then
they will be started concurrently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>manager</strong><span class="classifier">TransactionManager</span></dt><dd><p>TransactionManager which uses this instance of scheduler for
arbitrating which agent should get a grant signal.</p>
</dd>
<dt><strong>m</strong><span class="classifier">Module</span></dt><dd><p>Module to which signals and calculations should be connected.</p>
</dd>
<dt><strong>gr</strong><span class="classifier">ConflictGraph</span></dt><dd><p>Graph of conflicts between transactions, where vertices are transactions and edges are conflicts.</p>
</dd>
<dt><strong>cc</strong><span class="classifier">Set[Transaction]</span></dt><dd><p>Connected components of the graph <cite>gr</cite> for which scheduler
should be generated.</p>
</dd>
<dt><strong>porder</strong><span class="classifier">PriorityOrder</span></dt><dd><p>Linear ordering of transactions which is consistent with priority constraints.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coreblocks.transactions.core.trivial_roundrobin_cc_scheduler">
<span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.core.</span></span><span class="sig-name descname"><span class="pre">trivial_roundrobin_cc_scheduler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">porder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Transaction'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.core.trivial_roundrobin_cc_scheduler" title="Permalink to this definition"></a></dt>
<dd><p>This function generates a simple round-robin scheduler for the transaction
subsystem. In a one cycle there will be at most one transaction granted
(in a given connected component of the conflict graph), even if there is
another ready, non-conflicting, transaction. It is mainly for testing
purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>manager</strong><span class="classifier">TransactionManager</span></dt><dd><p>TransactionManager which uses this instance of scheduler for
arbitrating which agent should get grant signal.</p>
</dd>
<dt><strong>m</strong><span class="classifier">Module</span></dt><dd><p>Module to which signals and calculations should be connected.</p>
</dd>
<dt><strong>gr</strong><span class="classifier">ConflictGraph</span></dt><dd><p>Graph of conflicts between transactions, where vertices are transactions and edges are conflicts.</p>
</dd>
<dt><strong>cc</strong><span class="classifier">Set[Transaction]</span></dt><dd><p>Connected components of the graph <cite>gr</cite> for which scheduler
should be generated.</p>
</dd>
<dt><strong>porder</strong><span class="classifier">PriorityOrder</span></dt><dd><p>Linear ordering of transactions which is consistent with priority constraints.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-coreblocks.transactions.graph">
<span id="coreblocks-transactions-graph-module"></span><h2>coreblocks.transactions.graph module<a class="headerlink" href="#module-coreblocks.transactions.graph" title="Permalink to this heading"></a></h2>
<p>Utilities for extracting dependency graphs from Amaranth designs.</p>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.Owned">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.graph.</span></span><span class="sig-name descname"><span class="pre">Owned</span></span><a class="headerlink" href="#coreblocks.transactions.graph.Owned" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.Owned.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#coreblocks.transactions.graph.Owned.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.Owned.owner">
<span class="sig-name descname"><span class="pre">owner</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Elaboratable</span></em><a class="headerlink" href="#coreblocks.transactions.graph.Owned.owner" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.graph.</span></span><span class="sig-name descname"><span class="pre">OwnershipGraph</span></span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'dot'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'elk'</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.dump" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.dump_dot">
<span class="sig-name descname"><span class="pre">dump_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.dump_dot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.dump_elk">
<span class="sig-name descname"><span class="pre">dump_elk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.dump_elk" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.get_hier_name">
<span class="sig-name descname"><span class="pre">get_hier_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.graph.Owned" title="coreblocks.transactions.graph.Owned"><span class="pre">Owned</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.get_hier_name" title="Permalink to this definition"></a></dt>
<dd><p>Get hierarchical name.
Might raise KeyError if not yet hierarchized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.graph.Owned" title="coreblocks.transactions.graph.Owned"><span class="pre">Owned</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.get_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.insert_edge">
<span class="sig-name descname"><span class="pre">insert_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.graph.Owned" title="coreblocks.transactions.graph.Owned"><span class="pre">Owned</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.graph.Owned" title="coreblocks.transactions.graph.Owned"><span class="pre">Owned</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'-&gt;'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.insert_edge" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.insert_node">
<span class="sig-name descname"><span class="pre">insert_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.graph.Owned" title="coreblocks.transactions.graph.Owned"><span class="pre">Owned</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.insert_node" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.remember">
<span class="sig-name descname"><span class="pre">remember</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">owner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Elaboratable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.remember" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.graph.OwnershipGraph.remember_field">
<span class="sig-name descname"><span class="pre">remember_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">owner_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Elaboratable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.graph.OwnershipGraph.remember_field" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-coreblocks.transactions.lib">
<span id="coreblocks-transactions-lib-module"></span><h2>coreblocks.transactions.lib module<a class="headerlink" href="#module-coreblocks.transactions.lib" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.Adapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">Adapter</span></span><a class="headerlink" href="#coreblocks.transactions.lib.Adapter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AdapterBase</span></code></p>
<p>Adapter method.</p>
<p>Creates a method controlled by plain Amaranth signals. One of the
possible uses is to mock a method in a testbench.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>en: Signal, in</strong></dt><dd><p>Activates the method (sets the <code class="docutils literal notranslate"><span class="pre">ready</span></code> signal).</p>
</dd>
<dt><strong>done: Signal, out</strong></dt><dd><p>Signals that the method is called (returns the <code class="docutils literal notranslate"><span class="pre">run</span></code> signal).</p>
</dd>
<dt><strong>data_in: Record, in</strong></dt><dd><p>Data returned from the defined method.</p>
</dd>
<dt><strong>data_out: Record, out</strong></dt><dd><p>Data passed as argument to the defined method.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.Adapter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.Adapter.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>i: int or record layout</strong></dt><dd><p>The input layout of the defined method.</p>
</dd>
<dt><strong>o: int or record layout</strong></dt><dd><p>The output layout of the defined method.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.AdapterTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">AdapterTrans</span></span><a class="headerlink" href="#coreblocks.transactions.lib.AdapterTrans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AdapterBase</span></code></p>
<p>Adapter transaction.</p>
<p>Creates a transaction controlled by plain Amaranth signals. Allows to
expose a method to plain Amaranth code, including testbenches.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>en: Signal, in</strong></dt><dd><p>Activates the transaction (sets the <code class="docutils literal notranslate"><span class="pre">request</span></code> signal).</p>
</dd>
<dt><strong>done: Signal, out</strong></dt><dd><p>Signals that the transaction is performed (returns the <code class="docutils literal notranslate"><span class="pre">grant</span></code>
signal).</p>
</dd>
<dt><strong>data_in: Record, in</strong></dt><dd><p>Data passed to the <code class="docutils literal notranslate"><span class="pre">iface</span></code> method.</p>
</dd>
<dt><strong>data_out: Record, out</strong></dt><dd><p>Data returned from the <code class="docutils literal notranslate"><span class="pre">iface</span></code> method.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.AdapterTrans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iface</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.AdapterTrans.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>iface: Method</strong></dt><dd><p>The method to be called by the transaction.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.CatTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">CatTrans</span></span><a class="headerlink" href="#coreblocks.transactions.lib.CatTrans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Concatenating transaction.</p>
<p>Concatenates the results of two methods and passes the result to the
third method.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.CatTrans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">src2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.CatTrans.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>src1: Method</strong></dt><dd><p>First input method.</p>
</dd>
<dt><strong>src2: Method</strong></dt><dd><p>Second input method.</p>
</dd>
<dt><strong>dst: Method</strong></dt><dd><p>The method which receives the concatenation of the results of input
methods.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ClickIn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">ClickIn</span></span><a class="headerlink" href="#coreblocks.transactions.lib.ClickIn" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Clicked input.</p>
<p>Useful for interactive simulations or FPGA button/switch interfaces.
On a rising edge (tested synchronously) of <code class="docutils literal notranslate"><span class="pre">btn</span></code>, the <code class="docutils literal notranslate"><span class="pre">get</span></code> method
is enabled, which returns the data present on <code class="docutils literal notranslate"><span class="pre">dat</span></code> at the time.
Inputs are synchronized.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>get: Method</strong></dt><dd><p>The method for retrieving data from the input. Accepts an empty
argument, returns a <code class="docutils literal notranslate"><span class="pre">Record</span></code>.</p>
</dd>
<dt><strong>btn: Signal, in</strong></dt><dd><p>The button input.</p>
</dd>
<dt><strong>dat: Record, in</strong></dt><dd><p>The data input.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ClickIn.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.ClickIn.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>layout: int or record layout</strong></dt><dd><p>The data format for the input.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ClickOut">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">ClickOut</span></span><a class="headerlink" href="#coreblocks.transactions.lib.ClickOut" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Clicked output.</p>
<p>Useful for interactive simulations or FPGA button/LED interfaces.
On a rising edge (tested synchronously) of <code class="docutils literal notranslate"><span class="pre">btn</span></code>, the <code class="docutils literal notranslate"><span class="pre">put</span></code> method
is enabled, which, when called, changes the value of the <code class="docutils literal notranslate"><span class="pre">dat</span></code> signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>put: Method</strong></dt><dd><p>The method for retrieving data from the input. Accepts a <code class="docutils literal notranslate"><span class="pre">Record</span></code>,
returns empty result.</p>
</dd>
<dt><strong>btn: Signal, in</strong></dt><dd><p>The button input.</p>
</dd>
<dt><strong>dat: Record, out</strong></dt><dd><p>The data output.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ClickOut.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.ClickOut.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>layout: int or record layout</strong></dt><dd><p>The data format for the output.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ConnectAndTransformTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">ConnectAndTransformTrans</span></span><a class="headerlink" href="#coreblocks.transactions.lib.ConnectAndTransformTrans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Connecting transaction with transformations.</p>
<p>Behaves like <code class="docutils literal notranslate"><span class="pre">ConnectTrans</span></code>, but modifies the transferred data using
functions or <code class="docutils literal notranslate"><span class="pre">Method``s.</span> <span class="pre">Equivalent</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">combination</span> <span class="pre">of</span>
<span class="pre">``ConnectTrans</span></code> and <code class="docutils literal notranslate"><span class="pre">MethodTransformer</span></code>. The transformation
functions take two parameters, a <code class="docutils literal notranslate"><span class="pre">Module</span></code> and the <code class="docutils literal notranslate"><span class="pre">Record</span></code> being
transformed.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ConnectAndTransformTrans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">method2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_fun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RecordDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o_fun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RecordDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.ConnectAndTransformTrans.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>method1: Method</strong></dt><dd><p>First method.</p>
</dd>
<dt><strong>method2: Method</strong></dt><dd><p>Second method, and the method being transformed.</p>
</dd>
<dt><strong>i_fun: function or Method, optional</strong></dt><dd><p>Input transformation (<code class="docutils literal notranslate"><span class="pre">method1</span></code> to <code class="docutils literal notranslate"><span class="pre">method2</span></code>).</p>
</dd>
<dt><strong>o_fun: function or Method, optional</strong></dt><dd><p>Output transformation (<code class="docutils literal notranslate"><span class="pre">method2</span></code> to <code class="docutils literal notranslate"><span class="pre">method1</span></code>).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ConnectTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">ConnectTrans</span></span><a class="headerlink" href="#coreblocks.transactions.lib.ConnectTrans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Simple connecting transaction.</p>
<p>Takes two methods and creates a transaction which calls both of them.
Result of the first method is connected to the argument of the second,
and vice versa. Allows easily connecting methods with compatible
layouts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ConnectTrans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">method2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.ConnectTrans.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>method1: Method</strong></dt><dd><p>First method.</p>
</dd>
<dt><strong>method2: Method</strong></dt><dd><p>Second method.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.FIFO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">FIFO</span></span><a class="headerlink" href="#coreblocks.transactions.lib.FIFO" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>FIFO module.</p>
<p>Provides a transactional interface to Amaranth FIFOs. Exposes two methods:
<code class="docutils literal notranslate"><span class="pre">read</span></code>, and <code class="docutils literal notranslate"><span class="pre">write</span></code>. Both methods are ready only when they can
be executed – i.e. the queue is respectively not empty / not full.
It is possible to simultaneously read and write in a single clock cycle,
but only if both readiness conditions are fulfilled.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>read: Method</strong></dt><dd><p>The read method. Accepts an empty argument, returns a <code class="docutils literal notranslate"><span class="pre">Record</span></code>.</p>
</dd>
<dt><strong>write: Method</strong></dt><dd><p>The write method. Accepts a <code class="docutils literal notranslate"><span class="pre">Record</span></code>, returns empty result.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.FIFO.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">layout:</span> <span class="pre">~typing.Union[int,</span> <span class="pre">~amaranth.hdl.rec.Layout,</span> <span class="pre">~typing.Sequence[~typing.Union[~typing.Tuple[str,</span> <span class="pre">~typing.Union[~amaranth.hdl.ast.Shape,</span> <span class="pre">int,</span> <span class="pre">range,</span> <span class="pre">~typing.Type[~enum.Enum],</span> <span class="pre">LayoutLike]],</span> <span class="pre">~typing.Tuple[str,</span> <span class="pre">~typing.Union[~amaranth.hdl.ast.Shape,</span> <span class="pre">int,</span> <span class="pre">range,</span> <span class="pre">~typing.Type[~enum.Enum],</span> <span class="pre">LayoutLike],</span> <span class="pre">~amaranth.hdl.rec.Direction]]]],</span> <span class="pre">depth:</span> <span class="pre">int,</span> <span class="pre">fifo_type=&lt;class</span> <span class="pre">'amaranth.lib.fifo.SyncFIFO'&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.FIFO.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>layout: int or record layout</strong></dt><dd><p>The format of records stored in the FIFO.</p>
</dd>
<dt><strong>depth: int</strong></dt><dd><p>Size of the FIFO.</p>
</dd>
<dt><strong>fifoType: Elaboratable</strong></dt><dd><p>FIFO module conforming to Amaranth library FIFO interface. Defaults
to SyncFIFO.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ManyToOneConnectTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">ManyToOneConnectTrans</span></span><a class="headerlink" href="#coreblocks.transactions.lib.ManyToOneConnectTrans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Many-to-one method connection.</p>
<p>Connects each of a set of methods to another method using separate
transactions. Equivalent to a set of <cite>ConnectTrans</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.ManyToOneConnectTrans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">put_result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.ManyToOneConnectTrans.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>get_results: list[Method]</strong></dt><dd><p>Methods to be connected to the <cite>put_result</cite> method.</p>
</dd>
<dt><strong>put_result: Method</strong></dt><dd><p>Common method for each of the connections created.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.MethodFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">MethodFilter</span></span><a class="headerlink" href="#coreblocks.transactions.lib.MethodFilter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Method filter.</p>
<p>Takes a target method and creates a method which calls the target method
only when some condition is true. The condition function takes two
parameters, a module and the input <code class="docutils literal notranslate"><span class="pre">Record</span></code> of the method. Non-zero
return value is interpreted as true. Alternatively to using a function,
a <code class="docutils literal notranslate"><span class="pre">Method</span></code> can be passed as a condition.</p>
<p>Caveat: because of the limitations of transaction scheduling, the target
method is locked for usage even if it is not called.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>method: Method</strong></dt><dd><p>The transformed method.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.MethodFilter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RecordDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RecordDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.MethodFilter.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>target: Method</strong></dt><dd><p>The target method.</p>
</dd>
<dt><strong>condition: function or Method</strong></dt><dd><p>The condition which, when true, allows the call to <code class="docutils literal notranslate"><span class="pre">target</span></code>. When
false, <code class="docutils literal notranslate"><span class="pre">default</span></code> is returned.</p>
</dd>
<dt><strong>default: Value or dict, optional</strong></dt><dd><p>The default value returned from the filtered method when the condition
is false. If omitted, zero is returned.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.MethodProduct">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.lib.</span></span><span class="sig-name descname"><span class="pre">MethodProduct</span></span><a class="headerlink" href="#coreblocks.transactions.lib.MethodProduct" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.lib.MethodProduct.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combiner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Module</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">amaranth.hdl.rec.Record</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Value</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Enum</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">RecordDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.lib.MethodProduct.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Method product.</p>
<p>Takes arbitrary, non-zero number of target methods, and constructs
a method which calls all of the target methods using the same
argument. The return value of the resulting method is, by default,
the return value of the first of the target methods. A combiner
function can be passed, which can compute the return value from
the results of every target method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>targets: list[Method]</strong></dt><dd><p>A list of methods to be called.</p>
</dd>
<dt><strong>combiner: (int or method layout, function), optional</strong></dt><dd><p>A pair of the output layout and the combiner function. The
combiner function takes two parameters: a <code class="docutils literal notranslate"><span class="pre">Module</span></code> and
a list of outputs of the target methods.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>method: Method</strong></dt><dd><p>The product method.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-coreblocks.transactions.tracing">
<span id="coreblocks-transactions-tracing-module"></span><h2>coreblocks.transactions.tracing module<a class="headerlink" href="#module-coreblocks.transactions.tracing" title="Permalink to this heading"></a></h2>
<p>Utilities for extracting dependencies from Amaranth.</p>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingEnabler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.tracing.</span></span><span class="sig-name descname"><span class="pre">TracingEnabler</span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingEnabler" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.tracing.</span></span><span class="sig-name descname"><span class="pre">TracingFragment</span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragment" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Fragment</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragment.get">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Elaboratable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">platform</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.tracing.TracingFragment" title="coreblocks.transactions.tracing.TracingFragment"><span class="pre">TracingFragment</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragment.get" title="Permalink to this definition"></a></dt>
<dd><p>This function code is based on Amaranth, which originally loses all information.
It was too difficult to hook into, so this has to be a near-exact copy.</p>
<p>Relevant copyrights apply.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragment.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.tracing.TracingFragment" title="coreblocks.transactions.tracing.TracingFragment"><span class="pre">TracingFragment</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragment.prepare" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragment.subfragments">
<span class="sig-name descname"><span class="pre">subfragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">amaranth.hdl.ir.Elaboratable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragment.subfragments" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragmentTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.tracing.</span></span><span class="sig-name descname"><span class="pre">TracingFragmentTransformer</span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragmentTransformer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentTransformer</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingFragmentTransformer.on_fragment">
<span class="sig-name descname"><span class="pre">on_fragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingFragmentTransformer.on_fragment" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingInstance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.tracing.</span></span><span class="sig-name descname"><span class="pre">TracingInstance</span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingInstance" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Instance</span></code>, <a class="reference internal" href="#coreblocks.transactions.tracing.TracingFragment" title="coreblocks.transactions.tracing.TracingFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">TracingFragment</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.tracing.TracingInstance.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">platform</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.tracing.TracingFragment" title="coreblocks.transactions.tracing.TracingFragment"><span class="pre">TracingFragment</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.tracing.TracingInstance.get" title="Permalink to this definition"></a></dt>
<dd><p>This function code is based on Amaranth, which originally loses all information.
It was too difficult to hook into, so this has to be a near-exact copy.</p>
<p>Relevant copyrights apply.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-coreblocks.transactions">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-coreblocks.transactions" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.Method">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">Method</span></span><a class="headerlink" href="#coreblocks.transactions.Method" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transactional method.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Method</span></code> serves to interface a module with external <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s. It can be called by at most once in a given clock cycle.
When a given <code class="docutils literal notranslate"><span class="pre">Method</span></code> is required by multiple <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
(either directly, or indirectly via another <code class="docutils literal notranslate"><span class="pre">Method</span></code>) simultenaously,
at most one of them is granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>, and the rest
of them must wait. (Non-exclusive methods are an exception to this
behavior.) Calling a <code class="docutils literal notranslate"><span class="pre">Method</span></code> always takes a single clock cycle.</p>
<p>Data is combinatorially transferred between to and from <code class="docutils literal notranslate"><span class="pre">Method</span></code>s
using Amaranth <code class="docutils literal notranslate"><span class="pre">Record</span></code>s. The transfer can take place in both directions
at the same time: from the called <code class="docutils literal notranslate"><span class="pre">Method</span></code> to the caller (<code class="docutils literal notranslate"><span class="pre">data_out</span></code>)
and from the caller to the called <code class="docutils literal notranslate"><span class="pre">Method</span></code> (<code class="docutils literal notranslate"><span class="pre">data_in</span></code>).</p>
<p>A module which defines a <code class="docutils literal notranslate"><span class="pre">Method</span></code> should use <code class="docutils literal notranslate"><span class="pre">body</span></code> or <code class="docutils literal notranslate"><span class="pre">def_method</span></code>
to describe the method’s effect on the module state.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
<dt><strong>ready: Signal, in</strong></dt><dd><p>Signals that the method is ready to run in the current cycle.
Typically defined by calling <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
</dd>
<dt><strong>run: Signal, out</strong></dt><dd><p>Signals that the method is called in the current cycle by some
<code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. Defined by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>.</p>
</dd>
<dt><strong>data_in: Record, out</strong></dt><dd><p>Contains the data passed to the <code class="docutils literal notranslate"><span class="pre">Method</span></code> by the caller
(a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>).</p>
</dd>
<dt><strong>data_out: Record, in</strong></dt><dd><p>Contains the data passed from the <code class="docutils literal notranslate"><span class="pre">Method</span></code> to the caller
(a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>). Typically defined by
calling <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Layout</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Shape</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">range</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Enum</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LayoutLike</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Direction</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonexclusive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.Method.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str or None</strong></dt><dd><p>Name hint for this <code class="docutils literal notranslate"><span class="pre">Method</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default) the name is
inferred from the variable name this <code class="docutils literal notranslate"><span class="pre">Method</span></code> is assigned to.</p>
</dd>
<dt><strong>i: int or record layout</strong></dt><dd><p>The format of <code class="docutils literal notranslate"><span class="pre">data_in</span></code>.
An <code class="docutils literal notranslate"><span class="pre">int</span></code> corresponds to a <code class="docutils literal notranslate"><span class="pre">Record</span></code> with a single <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd>
<dt><strong>o: int or record layout</strong></dt><dd><p>The format of <code class="docutils literal notranslate"><span class="pre">data_in</span></code>.
An <code class="docutils literal notranslate"><span class="pre">int</span></code> corresponds to a <code class="docutils literal notranslate"><span class="pre">Record</span></code> with a single <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd>
<dt><strong>nonexclusive: bool</strong></dt><dd><p>If true, the method is non-exclusive: it can be called by multiple
transactions in the same clock cycle. If such a situation happens,
the method still is executed only once, and each of the callers
receive its output. Nonexclusive methods cannot have inputs.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.add_conflict">
<span class="sig-name descname"><span class="pre">add_conflict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">ConflictPriority</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ConflictPriority.UNDEFINED</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#coreblocks.transactions.Method.add_conflict" title="Permalink to this definition"></a></dt>
<dd><p>Registers a conflict.</p>
<p>Record that that the given <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code> cannot execute
simultaneously with this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.  Typical reason is using a common
resource (register write or memory port).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>end: Transaction or Method</strong></dt><dd><p>The conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code></p>
</dd>
<dt><strong>priority: ConflictPriority, optional</strong></dt><dd><p>Is one of conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s prioritized?
Defaults to undefined priority relation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.body">
<span class="sig-name descname"><span class="pre">body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ready:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">0'd0)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Record</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.Method.body" title="Permalink to this definition"></a></dt>
<dd><p>Define method body</p>
<p>The <code class="docutils literal notranslate"><span class="pre">body</span></code> function should be used to define body of
a method. It uses the <code class="docutils literal notranslate"><span class="pre">ready</span></code> and <code class="docutils literal notranslate"><span class="pre">ret</span></code> signals provided by
the user to feed internal transactions logic and to pass this data
to method users. Inside the body, other <code class="docutils literal notranslate"><span class="pre">Method</span></code> s can be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m</strong><span class="classifier">Module</span></dt><dd><p>Module in which operations on signals should be executed,
<code class="docutils literal notranslate"><span class="pre">body</span></code> uses the combinational domain only.</p>
</dd>
<dt><strong>ready</strong><span class="classifier">Signal, in</span></dt><dd><p>Signal to indicate if the method is ready to be run. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so the method is always ready.
Assigned combinatorially to the <code class="docutils literal notranslate"><span class="pre">ready</span></code> attribute.</p>
</dd>
<dt><strong>out</strong><span class="classifier">Record, in</span></dt><dd><p>Data generated by the <code class="docutils literal notranslate"><span class="pre">Method</span></code>, which will be passed to
the caller (a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another <code class="docutils literal notranslate"><span class="pre">Method</span></code>). Assigned
combinatorially to the <code class="docutils literal notranslate"><span class="pre">data_out</span></code> attribute.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>data_in</strong><span class="classifier">Record, out</span></dt><dd><p>Data passed from the caller (a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or another
<code class="docutils literal notranslate"><span class="pre">Method</span></code>) to this <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="n">my_sum_method</span> <span class="o">=</span> <span class="n">Method</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">([(</span><span class="s2">&quot;arg1&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="s2">&quot;arg2&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">)]))</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="k">with</span> <span class="n">my_sum_method</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">out</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_in</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">comb</span> <span class="o">+=</span> <span class="nb">sum</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">data_in</span><span class="o">.</span><span class="n">arg1</span> <span class="o">+</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.conflicts">
<span class="sig-name descname"><span class="pre">conflicts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">coreblocks.transactions.core.Transaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">coreblocks.transactions.core.ConflictPriority</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#coreblocks.transactions.Method.conflicts" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.current">
<span class="sig-name descname"><span class="pre">current</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#coreblocks.transactions.Method.current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.debug_signals">
<span class="sig-name descname"><span class="pre">debug_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.Method.debug_signals" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.like">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">like</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.Method.like" title="Permalink to this definition"></a></dt>
<dd><p>Constructs a new <code class="docutils literal notranslate"><span class="pre">Method</span></code> based on another.</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">Method</span></code> has the same input/output data layouts as the
<code class="docutils literal notranslate"><span class="pre">other</span></code> <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong><span class="classifier">Method</span></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">Method</span></code> which serves as a blueprint for the new <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the new <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Method</dt><dd><p>The freshly constructed <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.method_uses">
<span class="sig-name descname"><span class="pre">method_uses</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#coreblocks.transactions.Method.method_uses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Method.use_method">
<span class="sig-name descname"><span class="pre">use_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.Method.use_method" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><a class="headerlink" href="#coreblocks.transactions.Transaction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transaction.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> represents a task which needs to be regularly done.
Execution of a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> always lasts a single clock cycle.
A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> signals readiness for execution by setting the
<code class="docutils literal notranslate"><span class="pre">request</span></code> signal. If the conditions for its execution are met, it
can be granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> can, as part of its execution, call a number of
<code class="docutils literal notranslate"><span class="pre">Method</span></code>s. A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> can be granted only if every <code class="docutils literal notranslate"><span class="pre">Method</span></code>
it runs is ready.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> cannot execute concurrently with another, conflicting
<code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. Conflicts between <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s are either explicit
or implicit. An explicit conflict is added using the <code class="docutils literal notranslate"><span class="pre">add_conflict</span></code>
method. Implicit conflicts arise between pairs of <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
which use the same <code class="docutils literal notranslate"><span class="pre">Method</span></code>.</p>
<p>A module which defines a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> should use <code class="docutils literal notranslate"><span class="pre">body</span></code> to
describe used methods and the transaction’s effect on the module state.
The used methods should be called inside the <code class="docutils literal notranslate"><span class="pre">body</span></code>’s
<code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.</p>
</dd>
<dt><strong>request: Signal, in</strong></dt><dd><p>Signals that the transaction wants to run. If omitted, the transaction
is always ready. Defined in the constructor.</p>
</dd>
<dt><strong>grant: Signal, out</strong></dt><dd><p>Signals that the transaction is granted by the <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code>,
and all used methods are called.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.Transaction.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str or None</strong></dt><dd><p>Name hint for this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default) the name is
inferred from the variable name this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> is assigned to.
If the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> was not assigned, the name is inferred from
the class name where the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> was constructed.</p>
</dd>
<dt><strong>manager: TransactionManager</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> controlling this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.
If omitted, the manager is received from <code class="docutils literal notranslate"><span class="pre">TransactionContext</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.add_conflict">
<span class="sig-name descname"><span class="pre">add_conflict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">ConflictPriority</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ConflictPriority.UNDEFINED</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#coreblocks.transactions.Transaction.add_conflict" title="Permalink to this definition"></a></dt>
<dd><p>Registers a conflict.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> is informed that given <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>
or <code class="docutils literal notranslate"><span class="pre">Method</span></code> cannot execute simultaneously with this <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>.
Typical reason is using a common resource (register write
or memory port).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>end: Transaction or Method</strong></dt><dd><p>The conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> or <code class="docutils literal notranslate"><span class="pre">Method</span></code></p>
</dd>
<dt><strong>priority: ConflictPriority, optional</strong></dt><dd><p>Is one of conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s or <code class="docutils literal notranslate"><span class="pre">Method</span></code>s prioritized?
Defaults to undefined priority relation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.body">
<span class="sig-name descname"><span class="pre">body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.Transaction.body" title="Permalink to this definition"></a></dt>
<dd><p>Defines the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> body.</p>
<p>This context manager allows to conveniently define the actions
performed by a <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> when it’s granted. Each assignment
added to a domain under <code class="docutils literal notranslate"><span class="pre">body</span></code> is guarded by the <code class="docutils literal notranslate"><span class="pre">grant</span></code> signal.
<code class="docutils literal notranslate"><span class="pre">Method</span></code> calls can be performed under <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m: Module</strong></dt><dd><p>The module where the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> is defined.</p>
</dd>
<dt><strong>request: Signal</strong></dt><dd><p>Indicates that the <code class="docutils literal notranslate"><span class="pre">Transaction</span></code> wants to be executed. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so it wants to be executed in
every clock cycle.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.conflicts">
<span class="sig-name descname"><span class="pre">conflicts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">coreblocks.transactions.core.Transaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#coreblocks.transactions.core.ConflictPriority" title="coreblocks.transactions.core.ConflictPriority"><span class="pre">coreblocks.transactions.core.ConflictPriority</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#coreblocks.transactions.Transaction.conflicts" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.context">
<span class="sig-name descname"><span class="pre">context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.Transaction.context" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.current">
<span class="sig-name descname"><span class="pre">current</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#coreblocks.transactions.Transaction.current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.debug_signals">
<span class="sig-name descname"><span class="pre">debug_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Signal</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Record</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DebugSignals</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#coreblocks.transactions.Transaction.debug_signals" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.get">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.Transaction.get" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.method_uses">
<span class="sig-name descname"><span class="pre">method_uses</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">coreblocks.transactions.core.Method</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#coreblocks.transactions.Transaction.method_uses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.Transaction.use_method">
<span class="sig-name descname"><span class="pre">use_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Method" title="coreblocks.transactions.core.Method"><span class="pre">Method</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">amaranth.hdl.ast.Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">enum.Enum</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">amaranth.hdl.ast.ValueCastable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.Transaction.use_method" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">TransactionContext</span></span><a class="headerlink" href="#coreblocks.transactions.TransactionContext" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionContext.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.TransactionContext.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionContext.get">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.TransactionContext.get" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionContext.stack">
<span class="sig-name descname"><span class="pre">stack</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">coreblocks.transactions.core.TransactionManager</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#coreblocks.transactions.TransactionContext.stack" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">TransactionManager</span></span><a class="headerlink" href="#coreblocks.transactions.TransactionManager" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Transaction manager</p>
<p>This module is responsible for granting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s and running
<code class="docutils literal notranslate"><span class="pre">Method</span></code>s. It takes care that two conflicting <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s
are never granted in the same clock cycle.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cc_scheduler:</span> <span class="pre">~typing.Callable[[~coreblocks.transactions.core.TransactionManager,</span> <span class="pre">~amaranth.hdl.dsl.Module,</span> <span class="pre">dict['Transaction',</span> <span class="pre">set['Transaction']],</span> <span class="pre">set['Transaction'],</span> <span class="pre">dict['Transaction',</span> <span class="pre">int]],</span> <span class="pre">None]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">eager_deterministic_cc_scheduler&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.TransactionManager.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionManager.add_transaction">
<span class="sig-name descname"><span class="pre">add_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#coreblocks.transactions.core.Transaction" title="coreblocks.transactions.core.Transaction"><span class="pre">Transaction</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.TransactionManager.add_transaction" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionManager.visual_graph">
<span class="sig-name descname"><span class="pre">visual_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.TransactionManager.visual_graph" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionModule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">TransactionModule</span></span><a class="headerlink" href="#coreblocks.transactions.TransactionModule" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TransactionModule</span></code> is used as wrapper on <code class="docutils literal notranslate"><span class="pre">Module</span></code> class,
which add support for transaction to the <code class="docutils literal notranslate"><span class="pre">Module</span></code>. It creates a
<code class="docutils literal notranslate"><span class="pre">TransactionManager</span></code> which will handle transaction scheduling
and can be used in definition of <code class="docutils literal notranslate"><span class="pre">Method</span></code>s and <code class="docutils literal notranslate"><span class="pre">Transaction</span></code>s.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionModule.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#coreblocks.transactions.core.TransactionManager" title="coreblocks.transactions.core.TransactionManager"><span class="pre">TransactionManager</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.TransactionModule.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>module: Module</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">Module</span></code> which should be wrapped to add support for
transactions and methods.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.transactions.TransactionModule.transaction_context">
<span class="sig-name descname"><span class="pre">transaction_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#coreblocks.transactions.core.TransactionContext" title="coreblocks.transactions.core.TransactionContext"><span class="pre">TransactionContext</span></a></span></span><a class="headerlink" href="#coreblocks.transactions.TransactionModule.transaction_context" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coreblocks.transactions.def_method">
<span class="sig-prename descclassname"><span class="pre">coreblocks.transactions.</span></span><span class="sig-name descname"><span class="pre">def_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m:</span> <span class="pre">~amaranth.hdl.dsl.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method:</span> <span class="pre">~coreblocks.transactions.core.Method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ready:</span> <span class="pre">amaranth.hdl.ast.Value</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">enum.Enum</span> <span class="pre">|</span> <span class="pre">amaranth.hdl.ast.ValueCastable</span> <span class="pre">=</span> <span class="pre">(const</span> <span class="pre">1'd1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.transactions.def_method" title="Permalink to this definition"></a></dt>
<dd><p>Define a method.</p>
<p>This decorator allows to define transactional methods in more
elegant way using Python’s <code class="docutils literal notranslate"><span class="pre">def</span></code> syntax.</p>
<p>The decorated function should take one argument, which will be a
record with input signals and return output values.
The returned value can be either a record or a dictionary of outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m: Module</strong></dt><dd><p>Module in which operations on signals should be executed.</p>
</dd>
<dt><strong>method: Method</strong></dt><dd><p>The method whose body is going to be defined.</p>
</dd>
<dt><strong>ready: Signal</strong></dt><dd><p>Signal to indicate if the method is ready to be run. By
default it is <code class="docutils literal notranslate"><span class="pre">Const(1)</span></code>, so the method is always ready.
Assigned combinatorially to the <code class="docutils literal notranslate"><span class="pre">ready</span></code> attribute.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="n">my_sum_method</span> <span class="o">=</span> <span class="n">Method</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;arg1&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="s2">&quot;arg2&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">)],</span> <span class="n">o</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="nd">@def_method</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">my_sum_method</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">data_in</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg1</span> <span class="o">+</span> <span class="n">data_in</span><span class="o">.</span><span class="n">arg2</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="coreblocks.structs_common.html" class="btn btn-neutral float-left" title="coreblocks.structs_common package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="coreblocks.utils.html" class="btn btn-neutral float-right" title="coreblocks.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Kuźnia Rdzeni, 2023.
      <span class="lastupdated">Last updated on 23:10 2023-01-02.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>